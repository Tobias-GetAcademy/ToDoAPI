<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <style>
        body
        {
            background-color: darkslategray;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>

    <button onclick="GetData()">GetData</button>

    <button onclick="">Delete</button>


    <button id="myBtn" onclick="writeData()">WriteData</button>

<div id="TextBox">
    <input id="idInput" placeholder="Id" >
    <input id="taskNameInput" placeholder="Task" >
    <input id="TaskDateInput" placeholder="Time/Date">
    <input id="PersonInput" placeholder="Person">
</div>

    <div id="ListText"></div>

    <script>



        let data = [];
        let html = "";
        let listText = document.getElementById('ListText');

        async function GetData() {
            await axios.get('/api/ToDoList').then(async function (response) {
                data = response.data;
                updateData();
            });
        }

        function updateData() {
            for (i = 0; i < data.length; i++) {
                html += `

                    <li>${data[i].id} , ${data[i].person}, ${data[i].taskName}, ${data[i].taskDate}
                        <input type="checkbox" id="finRot" name="something" value="Fin Rot"> </li>`;
            }

            listText.innerHTML = html;
        }



        async function writeData() {
            let id = document.getElementById('idInput').value;
            let intId = parseInt(id);
            let taskName = document.getElementById('taskNameInput').value;
            let taskDate = document.getElementById('TaskDateInput').value;
            let person = document.getElementById('PersonInput').value;

            let toDoObject =
            {
                Id: intId,
                TaskName: taskName,
                TaskDate: taskDate,
                Person: person

            };

            const response = await axios.post('/api/ToDoList', toDoObject);
            updateData();
        }

        var elem = document.getElementById("TextBox");
        elem.onkeyup = function (e) {
            if (e.keyCode == 13) {
                writeData();
                alert("Done!")
            }
        }

    </script>
</body>
</html>